I"<p>有一些场景，需要<strong>将网页转换成图篇</strong>。比如为了兼容性把网页图表生成截图随邮件发送，网页热力图的底图等等。</p>

<p>我想总不能搞个浏览器，将网页放进去然后截图吧。浏览器还不一定开放了这种接口呢。出于效率和规模的考虑，也不现实啊。</p>

<p>然后搜了一下。发现一些办法：</p>

<h2 id="1-使用awt或者swing">1. 使用awt或者swing</h2>
<p>思路基本上是现在 AWT or Swing 的Panel上显示网页，在把Panel输出为 image 文件。java 本身的API有提供相关的结果，但是直接产生的效果不是很好</p>

<h2 id="2-使用h5的api将网页画到canvas上">2. 使用h5的api，将网页画到canvas上</h2>
<p><a href="http://html2canvas.hertzen.com/screenshots.html">html2canvas</a>就是这样的一个东西。但是兼容性不好，中文字体啦，处理懒加载啦，各种问题。</p>

<h2 id="3-使用类似phantomjs这样的东西">3. 使用类似phantomjs这样的东西</h2>
<p><a href="http://phantomjs.org/">phantomjs</a>是一个没有界面的，提供了js API的WebKit。他很快，且原生支持各种web标准，比如Dom处理，CSS选择器等等。
使用phantomjs，首先要在服务器上安装phantomjs。然后用JNI调用本地命令和他交互就好了，就像imageMagic一样。
据官网介绍，他用来做页面的自动化测试也是非常棒的！
与他相似的还有<a href="https://slimerjs.org/">slimerjs</a>,只是他基于Gecko。</p>

<h2 id="4-还有一些其他的类库">4. 还有一些其他的类库</h2>
<p><a href="https://code.google.com/p/java-html2image/">Html2Image</a>, <a href="http://lobobrowser.org/">Cobra</a> 等等</p>

:ET