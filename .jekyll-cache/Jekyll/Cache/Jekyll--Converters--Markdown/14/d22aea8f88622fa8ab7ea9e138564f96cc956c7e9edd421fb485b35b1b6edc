I"a<p>先说办法，再说原理！</p>

<h1 id="办法">办法</h1>

<p>修改tomcat启动脚本：catalina.sh文件，找到<code class="language-plaintext highlighter-rouge">JAVA_OPTS</code> 增加文件编码参数：</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">JAVA_OPTS</span><span class="o">=</span><span class="s2">"</span><span class="nv">$JAVA_OPTS</span><span class="s2"> -Dfile.encoding=UTF-8"</span>
</code></pre></div></div>

<p>就ok了。</p>

<p>或者，在idea启动tomcat时，设置这个参数：</p>

<p><img src="https://ws2.sinaimg.cn/large/006tNc79ly1fgu0dj6siwj31kw0rrwh9.jpg" alt="" /></p>

<h1 id="原理">原理</h1>

<p>Idea控制台里的日志默认是从tomcat的localhost.log 和 catalina.log 两个文件读出来的。</p>

<p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1fgu03qo44gj31820ngdh0.jpg" alt="" /></p>

<p>一般，我们的IDEA配置的编码是UTF-8.</p>

<p><img src="https://ws3.sinaimg.cn/large/006tNc79ly1fgu06blyblj318e10qjtz.jpg" alt="" /></p>

<p>如果tomcat输出的catalina日志文件不是UTF-8的，在console里看，就会出现乱码的情况，所以，应该将tomcat生成文件的编码改了。</p>

<h1 id="扩展">扩展</h1>

<h2 id="idea启动的tomcat生成的catalinalog文件在哪呢">idea启动的tomcat生成的catalina.log文件在哪呢？</h2>

<p>在console中观察启动日志，其中一个参数叫 <code class="language-plaintext highlighter-rouge">CATALINA_BASE</code> 这个地址就是了。</p>

<p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fgu0h1snp7j318q0m243s.jpg" alt="" /></p>

<p>找到下面的logs目录，文件就躺在那。看一下修改前和修改后，生成的问题编码有什么不同：</p>

<p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1fgu0isa29tj30o005qaap.jpg" alt="" /></p>

:ET